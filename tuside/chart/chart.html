<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8">
  <title>Гистограмма</title>
  <script src="https://www.google.com/jsapi"></script>
  <script>
   google.load("visualization", "1", {packages:["corechart"]});
   //google.setOnLoadCallback(drawChart);
   function drawChart() {
    var data = google.visualization.arrayToDataTable([
     ['Год', 'Россия', 'США'],
     ['1860', 1.3, 70],
     ['1885', 2000, 3120],
     ['1901', 12170, 9920]
    ]);
    var options = {
     title: 'Добыча нефти',
     hAxis: {title: 'Год'},
     vAxis: {title: 'Тыс. тонн'}
    };
    var chart = new google.visualization.ColumnChart(document.getElementById('oil'));
    chart.draw(data, options);
   }
  </script>
 </head>
 <body>
 remNum<input type="text" id="removeNumbers" value="2,15,7,8,9,10,12,5,20,23,24,25,27,28,29,30,31"><br>
 start<input type="text" id="start" value="1"><br>
 end<input type="text" id="end" value="31"><br>
 step<input type="text" id="step" value="1"><br>
 <input type="button" onlick="Run" value="Run"><br>
  <div id="oil" style="width: 500px; height: 400px;"></div>
  <div id="output"></div>

 </body>
 <script>
 remNum=document.getElementById('removeNumbers').value;
 start=document.getElementById('start').value;
 end=document.getElementById('end').value;
 step=document.getElementById('step').value;
 //изв. в массив затем отсортировать по возрост.
 remNum=remNum.split(",");
 function compareNumeric(a, b) 
{
  return a-b;
}
//матем. ожид. Создать массив (поз., номер,участие, ожид.)
var arr=new Array();
for(i=0;i<=(end-start)/step;i++){
	arr[i]=new Array(+start+i*step,1,1);

	//alert(String(+start+i*step));
	if(remNum.indexOf(String(+start+i*step))>=0){
		arr[i][1]=0;
		arr[i][2]=0;
		
	}
}
remNum.sort(compareNumeric);

function findNearIndex(arr,indZero)
{
	indLeft=arr.length;
	for(j=indZero-1;j>=0;j--)
		if(arr[j][1]==1){
			indLeft=indZero-j;
			break;
		}
	indRight=arr.length;
	for(z=indZero+1;z<arr.length;z++)
		if(arr[z][1]==1){
			indRight=z-indZero;		
			break;
		}
	if(indRight>indLeft)
		return indZero-indLeft;
	else
		return indZero+indRight;
}
for(i=0;i<arr.length;i++){
	if(arr[i][1]==0){
		ind=findNearIndex(arr,i);
		arr[ind][2]+=1;
	}
}
str="";
strtable="<table><tr>";
for(i=0;i<arr.length;i++){
	if(arr[i][1]==0)
		continue;
	if(str=="")
		str=arr[i][2];
	else
		str=str+","+arr[i][2];
	strtable+="<td>"+arr[i][0]+"</td>";
}
strtable+="</tr><tr>";
for(i=0;i<arr.length;i++){
	if(arr[i][1]==0)
		continue;
	strtable+="<td>"+arr[i][2]+"</td>";
}
strtable+="</tr></table>";

    arrvis=new Array();
arrvis.push("Номер","Ожидания");
for(i=0;i<window.arr.length;i++){
	if(window.arr[i][1]==0)
		continue;
	arrvis.push(new Array(window.arr[i][0],window.arr[i][2]));
}

 document.getElementById('output').innerHTML=remNum;
 document.getElementById('output').innerHTML=strtable;
 </script>
 </html>